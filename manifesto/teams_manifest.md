# TEAMS Manifest (v1 — Frozen Canonical Version)

## 1. Назначение TEAMS
TEAMS — это **организационная платформа (кодекс + система управления)**, определяющая **как** ведётся работа над проектами, а не **чем и какими технологиями** она выполняется.

TEAMS не является продуктом, сервисом или runtime-движком и **не деплоится в продакшн**. Он существует как нормативная модель работы.

TEAMS задаёт:
- правила и принципы работы ("кодекс")
- роли, зоны ответственности и ограничения ("должности")
- стадии жизненного цикла задач ("функциональные отделы")
- обязательные артефакты и форматы отчётности
- контроль, аудит и HITL-гейты

Проекты (CRYPTOARB, DOTCLUB и др.) являются **автономными бизнес-юнитами**, которые инстанцируют TEAMS локально.

---

## 2. Базовые принципы

1. **TEAMS — организационная модель, а не технология**
   - TEAMS не зависит от SDK, LLM или инфраструктуры
   - автоматизация — подключаемый слой, а не основа

2. **Автономность проектов**
   - каждый проект — изолированный бизнес-юнит
   - собственные Slack, GitHub, серверы, бюджеты и секреты
   - отсутствие кросс-проектных задач и доступов

3. **TEAMS — источник истины**
   - проекты используют зафиксированную версию TEAMS
   - обновления происходят осознанно (opt-in)

4. **Трассируемость и аудит**
   - каждое решение должно быть воспроизводимо и зафиксировано
   - Slack → Issue → PR → Deploy → Report

5. **1 пост = 1 задача**
   - одна задача — один Slack-пост
   - всё обсуждение ведётся строго в треде

---

## 3. Жизненный цикл задачи и стадии пайплайна

TEAMS определяет **функциональные стадии работы**, аналогичные отделам компании.

Канонический пайплайн TEAMS:

1. **Think / Research** — анализ, варианты решений, исследование  
2. **Plan / Slice** — формализация решения, декомпозиция на задачи  
3. **Build / Implement** — реализация в коде, тестирование, PR  
4. **Ship / Operate** — доставка в продакшн, health-check, закрытие задачи  

Стадии являются:
- логическими фазами процесса  
- обязательными с точки зрения контроля  
- не привязанными к конкретной технологии исполнения  

Внутри проекта стадия может выполняться:
- агентом  
- человеком  
- автоматизированным инструментом  

---

### 3.1 TEAMS Pipeline (Change Management)

TEAMS pipeline управляет изменениями: как появляются задачи, как принимаются решения и как фиксируются результаты.  
Это управленческий контур — он не исполняет код, а управляет рисками и прозрачностью.

---

### 3.2 Project Execution Pipelines (Run Management)

Проектные пайплайны (Airflow, Prefect, CI/CD) выполняют вычислительную и техническую работу.  
Каждый DAG/Flow — часть execution-plane проекта, не TEAMS.

---

### 3.3 Контрактная связь

TEAMS и execution-plane взаимодействуют через контракт: `work_item_id`, `trace_id`, `run_id`.  
TEAMS триггерит исполнение, execution-plane отчитывается результатом.  
Они **не вложены**, а связаны логически.

---

## 4. Состав TEAMS

TEAMS включает только **нормативные сущности**:
- стадии пайплайна (think → plan → build → ship)
- роли (должности) и их контракты
- правила взаимодействия между ролями
- форматы артефактов (task, report, health, PR)
- политики безопасности, лимиты и HITL-гейты
- метрики успешности процесса
- контракты взаимодействия с execution-plane проектов (триггеры, статусы, артефакты)

### External Execution Tools

**External Execution Tools** — это любые внешние программные системы и специализированный софт (например: парсеры, браузерные автоматизаторы, торговые движки, сканеры, legacy-утилиты), которые используются внутри проектов для исполнения конкретных вычислительных или операционных задач.

External Execution Tools:
- являются частью **execution-plane проекта**, а не TEAMS
- не принимают решений и не управляют пайплайном
- запускаются и контролируются через оркестрацию (например, Airflow)
- рассматриваются TEAMS как «чёрные ящики исполнения», предоставляющие статус и артефакты выполнения

**Policy (обязательная проверка):** если результат работы External Execution Tool напрямую влияет на принятие решений системы без промежуточного буфера контроля (порогов, параметров, времени, ручного гейта или логики отката), такая задача автоматически классифицируется как **Class C (Behavior change)**.

---

## 5. Использование TEAMS в проектах

Каждый проект:
- инстанцирует минимальный набор артефактов TEAMS локально
- фиксирует используемую версию оргмодели
- может осознанно обновляться на новую версию

Минимальный набор артефактов:
- `team.lock.yaml`
- `task.template.yaml`
- `pipelines/*.pipeline.yaml`
- `policies.yaml`
- `integrations.yaml`

---

## 6. Эволюция TEAMS

TEAMS развивается как платформа:

1. Наблюдения и фидбек из проектов  
2. RFC / proposal в репозитории TEAMS  
3. Изменения оргмодели / правил / контрактов  
4. Проверка (eval / регрессия поведения)  
5. Релиз версии TEAMS  
6. Добровольное обновление проектов (opt-in)  

Проекты никогда не обновляются автоматически.

---

## 7. Типы изменений TEAMS

1. Добавление / удаление ролей агентов  
2. Изменение инструкций ролей  
3. Добавление новых инструментов  
4. Изменение существующих инструментов  
5. Изменение логики взаимодействия агентов  
6. Изменение форматов артефактов  
7. Изменение метрик и критериев успешности  
8. Изменение HITL-гейтов  
9. Изменение лимитов и бюджетных политик  

---

## 8. Классификация задач по классу риска

TEAMS **обязательно классифицирует каждую задачу** по классу риска.

### 8.1 Классы задач
- **Class A — Integration / Extension (низкий риск)**  
- **Class B — Configuration / Parameter change (средний риск)**  
- **Class C — Behavior change (высокий риск)**  

(подробные описания — сохранены как в предыдущей версии)

---

### 8.4 HITL (Human-in-the-Loop) как формальный гейт

HITL — это **обязательный ручной гейт**, при котором TEAMS передаёт право принятия решения человеку.  
HITL применяется **только** для задач **Class C** и **только перед стадией Ship**.  
До прохождения HITL автоматическое продолжение пайплайна запрещено.  
Решение HITL фиксируется явно (разрешить / отложить / отклонить) и является окончательным для данной задачи.  
HITL не используется для обсуждения вариантов решений и не применяется на стадиях Think, Plan и Build.

---

## 9. Архитектурная формула

- **TEAMS** = кодекс компании  
- **Проекты** = автономные бизнес-юниты  
- **Pipeline stages** = отделы  
- **Roles** = должности  
- **Agents / Humans** = исполнители  
- **Tools** = инструменты  
- **SDK / Engine** = технический способ выполнения  

> **TEAMS определяет правила игры.  
> Проекты играют по этим правилам.  
> Технологии — сменяемы.**
